{% extends "index.html" %}
{% load static %}

<html>
    {% block content %}
    <body>

        <h1>Map from Google</h1>
        <div id="googleMap" style="width:100%;height:400px;"></div>

        <script>
            document.onload(getLocation())

            var user_latitude 
            var user_longitude 

            function getLocation() {
            // Check whether browser supports Geolocation API or not
                if (navigator.geolocation) { // Supported
                    navigator.geolocation.getCurrentPosition(getPosition);
                } else { // Not supported
                    alert("Oops! This browser does not support HTML Geolocation.");
                }
            }

            function getPosition(position) {
                console.log(position);

                user_latitude = position.coords.latitude;
                user_longitude = position.coords.longitude;

                document.getElementById("location").innerHTML = 
                    "Latitude: " + user_latitude + "<br>" +
                    "Longitude: " + user_longitude;

            }
        </script>


        <script>
            function myMap () {
                var mapProp = {
                    center: new google.maps.LatLng(user_latitude, user_longitude),
                    zoom: 14,
                };

                var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
            }
        </script>

        <script 
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBatSFsLO7FcTGtpxjP7FcAwKaevJb1N_k&callback=myMap"
        >
        </script>
        
    </body>

    {% endblock content %}
</html>